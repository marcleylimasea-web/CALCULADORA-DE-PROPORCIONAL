<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Ajuste</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      padding: 20px;
    }
    h2 {
      text-align: center;
      color: #ff3333;
    }
    .criador {
      text-align: center;
      font-size: 13px;
      margin-bottom: 10px;
      color: #bbb;
    }
    .container {
      display: flex;
      gap: 20px;
    }
    .box {
      background: #1a0000;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px #660000;
      width: 360px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #660000;
      padding: 8px;
      text-align: center;
    }
    th {
      background: #cc0000;
      color: #fff;
    }
    .legenda {
      margin-top: 14px;
      font-size: 14px;
      color: #ddd;
    }
    .legenda div {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }
    .legenda-vermelho, .legenda-amarelo {
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-right: 6px;
      border-radius: 3px;
    }
    .legenda-vermelho { background: red; }
    .legenda-amarelo { background: yellow; }
    select, input {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border-radius: 5px;
      border: none;
      color: white;
      background: black;
    }
    input[type="date"], input[type="month"] {
      background: white;
      color: black;
    }
    button {
      width: 100%;
      padding: 10px;
      background: #ff3333;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 16px;
      cursor: pointer;
    }
    .resultado {
      margin-top: 15px;
      padding: 12px;
      background: #330000;
      border-radius: 8px;
    }
    .resultado h3 {
      margin: 0 0 10px;
      color: #ff3333;
    }
    hr {
      border: none;
      border-top: 1px solid #999;
      margin: 8px 0;
    }
  </style>
</head>
<body>
  <div>
    <div class="criador">CRIADOR: Marcley Lima</div>
    <div class="container">
      <!-- TABELA -->
      <div class="box">
        <h2>Tabela de Vencimentos</h2>
        <table>
          <tr><th>Vencimento</th><th>Abertura</th><th>Fechamento</th></tr>
          <tr><td>05</td><td>01</td><td>30</td></tr>
          <tr><td>10</td><td>01</td><td>30</td></tr>
          <tr><td>15</td><td>11</td><td>10</td></tr>
          <tr><td>20</td><td>11</td><td>10</td></tr>
          <tr><td>25</td><td>21</td><td>20</td></tr>
          <tr><td>30</td><td>21</td><td>20</td></tr>
        </table>
        <div class="legenda">
          <div><span class="legenda-vermelho"></span> Vencimento atual</div>
          <div><span class="legenda-amarelo"></span> Novo vencimento</div>
          <p><b>Importante:</b> o próximo boleto já virá no <b>novo vencimento</b> escolhido.</p>
        </div>
      </div>

      <!-- CALCULADORA -->
      <div class="box">
        <h2>Calculadora de Ajuste</h2>
        <label>Tipo de cálculo:</label>
        <select id="tipo" onchange="atualizarCampos()">
          <option value="Troca de Vencimento">Troca de Vencimento</option>
          <option value="Troca de Plano">Troca de Plano</option>
        </select>

        <div id="camposPlanoAtual">
          <label>Plano Atual:</label>
          <select id="planoAtual">
            <option value="3.30">SEA CONNECT — 500MB (R$3,30/dia)</option>
            <option value="3.90">SEA SUPER — 600MB (R$3,90/dia)</option>
            <option value="4.90">SEA MASTER — 700MB (R$4,90/dia)</option>
            <option value="6.90">SEA ULTRA — 800MB (R$6,90/dia)</option>
          </select>
        </div>

        <div id="camposNovoPlano">
          <label>Novo Plano:</label>
          <select id="planoNovo">
            <option value="3.30">SEA CONNECT — 500MB (R$3,30/dia)</option>
            <option value="3.90">SEA SUPER — 600MB (R$3,90/dia)</option>
            <option value="4.90">SEA MASTER — 700MB (R$4,90/dia)</option>
            <option value="6.90">SEA ULTRA — 800MB (R$6,90/dia)</option>
          </select>
        </div>

        <label>Vencimento Atual:</label>
        <select id="vencimentoAtual">
          <option value="05">05</option>
          <option value="10">10</option>
          <option value="15">15</option>
          <option value="20">20</option>
          <option value="25">25</option>
          <option value="30">30</option>
        </select>

        <div id="camposNovoVencimento">
          <label>Novo Vencimento:</label>
          <select id="novoVencimento">
            <option value="05">05</option>
            <option value="10">10</option>
            <option value="15">15</option>
            <option value="20">20</option>
            <option value="25">25</option>
            <option value="30">30</option>
          </select>
        </div>

        <label>Mês/ano do ciclo:</label>
        <input type="month" id="mes">

        <div id="campoDataTroca">
          <label>Data da Troca:</label>
          <input type="date" id="dataTroca">
        </div>

        <button onclick="calcular()">Calcular ajuste</button>

        <div id="resumo" class="resultado"></div>
        <div id="resultado" class="resultado"></div>
      </div>
    </div>
  </div>

<script>
function atualizarCampos() {
  const tipo = document.getElementById("tipo").value;
  document.getElementById("camposNovoPlano").style.display = (tipo === "Troca de Plano") ? "block" : "none";
  document.getElementById("camposNovoVencimento").style.display = (tipo === "Troca de Vencimento") ? "block" : "none";
  document.getElementById("campoDataTroca").style.display = (tipo === "Troca de Plano") ? "block" : "none";
}

function calcular() {
  const tipo = document.getElementById("tipo").value;
  const mes = document.getElementById("mes").value;
  const planoAtual = parseFloat(document.getElementById("planoAtual").value);

  if (!mes) {
    alert("Selecione o mês/ano do ciclo.");
    return;
  }

  const [ano, mesNum] = mes.split("-");
  const inicio = new Date(ano, mesNum - 1, 1);
  const fim = new Date(ano, mesNum, 0);

  if (tipo === "Troca de Plano") {
    const planoNovo = parseFloat(document.getElementById("planoNovo").value);
    const dataTroca = document.getElementById("dataTroca").value;
    if (!dataTroca) {
      alert("Selecione a data da troca.");
      return;
    }
    const troca = new Date(dataTroca);

    const diasAntigo = (troca.getDate() - 1); // até dia anterior
    const diasNovo = (fim.getDate() - troca.getDate() + 1); // do dia da troca até fim

    document.getElementById("resumo").innerHTML = `
      <h3>Resumo:</h3>
      Ciclo: ${inicio.toLocaleDateString()} até ${fim.toLocaleDateString()}<br>
      Troca em: ${troca.toLocaleDateString()}<br>
      Plano antigo: R$${planoAtual.toFixed(2)}/dia<br>
      Novo plano: R$${planoNovo.toFixed(2)}/dia
    `;

    document.getElementById("resultado").innerHTML = `
      <h3>Resultado:</h3>
      ${diasAntigo} dias × R$${planoAtual.toFixed(2)} = R$${(diasAntigo * planoAtual).toFixed(2)}<br>
      ${diasNovo} dias × R$${planoNovo.toFixed(2)} = R$${(diasNovo * planoNovo).toFixed(2)}<br>
      <hr>
      <b>Total: R$${((diasAntigo * planoAtual) + (diasNovo * planoNovo)).toFixed(2)}</b>
    `;
  }

  if (tipo === "Troca de Vencimento") {
    const vencAtual = document.getElementById("vencimentoAtual").value;
    const novoVenc = document.getElementById("novoVencimento").value;

    const dias = (fim - inicio) / (1000 * 60 * 60 * 24) + 1;

    document.getElementById("resumo").innerHTML = `
      <h3>Resumo:</h3>
      Ciclo ajustado: ${inicio.toLocaleDateString()} até ${fim.toLocaleDateString()}<br>
      Plano atual: R$${planoAtual.toFixed(2)}/dia<br>
      Vencimento atual: ${vencAtual}<br>
      Novo vencimento: ${novoVenc}<br>
      Dias totais: ${dias}
    `;

    document.getElementById("resultado").innerHTML = `
      <h3>Resultado:</h3>
      ${dias} dias × R$${planoAtual.toFixed(2)} = R$${(dias * planoAtual).toFixed(2)}
    `;
  }
}
</script>
</body>
</html>
